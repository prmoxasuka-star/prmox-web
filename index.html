<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Pair Code</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #25D366, #128C7E);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 500px;
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
        }

        .logo {
            color: #25D366;
            font-size: 48px;
            margin-bottom: 10px;
        }

        h1 {
            color: #075E54;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .input-group {
            margin-bottom: 25px;
            text-align: left;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: bold;
        }

        .phone-input {
            display: flex;
            align-items: center;
            border: 2px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            background: #f9f9f9;
        }

        .country-code {
            padding: 12px 15px;
            background: #075E54;
            color: white;
            font-weight: bold;
            min-width: 70px;
            text-align: center;
        }

        input[type="tel"] {
            flex: 1;
            padding: 12px 15px;
            border: none;
            font-size: 16px;
            outline: none;
            background: white;
        }

        input[type="tel"]:focus {
            background: #fff;
        }

        .small-text {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            display: block;
        }

        .generate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(to right, #25D366, #128C7E);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 20px;
        }

        .generate-btn:hover {
            background: linear-gradient(to right, #128C7E, #075E54);
            transform: translateY(-2px);
        }

        .generate-btn:active {
            transform: translateY(0);
        }

        .result-container {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: #f0f8ff;
            border-radius: 8px;
            border-left: 5px solid #25D366;
        }

        .pair-code {
            font-size: 48px;
            font-weight: bold;
            color: #075E54;
            letter-spacing: 10px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px dashed #25D366;
        }

        .info-text {
            color: #333;
            margin: 10px 0;
            line-height: 1.5;
        }

        .timestamp {
            font-size: 12px;
            color: #666;
            margin-top: 10px;
        }

        .error {
            color: #ff4444;
            background: #ffebee;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            display: none;
            border-left: 4px solid #ff4444;
        }

        .usage-steps {
            margin-top: 30px;
            text-align: left;
            background: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
        }

        .usage-steps h3 {
            color: #075E54;
            margin-bottom: 10px;
        }

        .usage-steps ol {
            padding-left: 20px;
            color: #333;
        }

        .usage-steps li {
            margin-bottom: 8px;
        }

        .footer {
            margin-top: 20px;
            color: #666;
            font-size: 12px;
            border-top: 1px solid #eee;
            padding-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">üì±</div>
        <h1>WhatsApp Pair Code Generator</h1>
        
        <div class="input-group">
            <label for="phoneNumber">‡∂î‡∂∂‡∂ú‡∑ö WhatsApp ‡∂Ö‡∂Ç‡∂ö‡∂∫:</label>
            <div class="phone-input">
                <span class="country-code" id="countryCodeDisplay">+94</span>
                <input type="tel" id="phoneNumber" 
                       placeholder="771234567" 
                       maxlength="12"
                       pattern="[0-9]*"
                       inputmode="numeric">
            </div>
            <span class="small-text">‡∂ã‡∂Ø‡∑è: 771234567 (94 ‡∂ö‡∑ö‡∂≠‡∂∫ ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂±‡∑ú‡∂ö‡∂ª‡∂±‡∑ä‡∂±)</span>
        </div>

        <button class="generate-btn" onclick="generatePairCode()">
            Pair Code ‡∂¢‡∂±‡∂±‡∂∫ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±
        </button>

        <div class="error" id="errorMessage">
            ‡∂Ø‡∑ù‡∑Ç ‡∂¥‡∂´‡∑í‡∑Ä‡∑í‡∂©‡∂∫ ‡∂∏‡∑ô‡∂≠‡∂± ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∂±‡∑î ‡∂á‡∂≠
        </div>

        <div class="result-container" id="resultContainer">
            <h2>‡∂î‡∂∂‡∂ú‡∑ö WhatsApp Pair Code:</h2>
            <div class="pair-code" id="pairCodeDisplay">000000</div>
            <p class="info-text" id="phoneDisplay"></p>
            <p class="info-text">
                ‡∂∏‡∑ô‡∂∏ ‡∂ö‡∑ö‡∂≠‡∂∫ WhatsApp ‡∑Ñ‡∑í <strong>Settings ‚Üí Linked Devices ‚Üí Link a Device</strong> 
                ‡∑Ä‡∑ô‡∂≠ ‡∂ú‡∑ú‡∑É‡∑ä ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.
            </p>
            <div class="timestamp" id="timestamp"></div>
        </div>

        <div class="usage-steps">
            <h3>‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∂ª‡∂± ‡∂Ü‡∂ö‡∑è‡∂ª‡∂∫:</h3>
            <ol>
                <li>‡∂î‡∂∂‡∂ú‡∑ö WhatsApp ‡∂Ö‡∂Ç‡∂ö‡∂∫ ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</li>
                <li>"Pair Code ‡∂¢‡∂±‡∂±‡∂∫ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±" ‡∂î‡∂∂‡∂±‡∑ä‡∂±</li>
                <li>‡∂Ω‡∑ê‡∂∂‡∑ô‡∂± 6-‡∂â‡∂Ω‡∂ö‡∑ä‡∂ö‡∂∏‡∑ä ‡∂ö‡∑ö‡∂≠‡∂∫ WhatsApp ‡∑Ñ‡∑í ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</li>
                <li>WhatsApp Web/Desktop ‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞ ‡∑Ä‡∂±‡∑î ‡∂á‡∂≠</li>
            </ol>
        </div>

        <div class="footer">
            <p>‚ö†Ô∏è ‡∂∏‡∑ô‡∂∫ WhatsApp ‡∑Ä‡∑í‡∑É‡∑í‡∂±‡∑ä ‡∂±‡∑í‡∂Ω ‡∑Ä‡∑Å‡∂∫‡∑ô‡∂±‡∑ä ‡∑É‡∂¥‡∂∫‡∂±‡∑î ‡∂±‡∑ú‡∂Ω‡∑ê‡∂∂‡∑ö</p>
            <p>‡∑É‡∑í‡∂∫‡∂Ω‡∑î ‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∂î‡∂∂‡∑ö ‡∂∂‡∑ä‚Äç‡∂ª‡∑Ä‡∑ä‡∑É‡∂ª‡∂∫‡∑ö ‡∂¥‡∂∏‡∂´‡∂ö‡∑ä ‡∂ú‡∂∂‡∂©‡∑è ‡∑Ä‡∑ö</p>
        </div>
    </div>

    <script>
        // WhatsApp pair code generation logic
        let generatedCodes = {};

        function generatePairCode() {
            // Clear previous error
            document.getElementById('errorMessage').style.display = 'none';
            
            // Get phone number
            const phoneInput = document.getElementById('phoneNumber');
            const phoneNumber = phoneInput.value.trim();
            
            // Validate phone number
            if (!phoneNumber) {
                showError('‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª WhatsApp ‡∂Ö‡∂Ç‡∂ö‡∂∫ ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±');
                return;
            }
            
            if (!/^\d+$/.test(phoneNumber)) {
                showError('‡∂Ö‡∂Ç‡∂ö‡∂∫‡∑ö ‡∂â‡∂Ω‡∂ö‡∑ä‡∂ö‡∂∏‡∑ä ‡∂¥‡∂∏‡∂´‡∂ö‡∑ä ‡∂Ö‡∂©‡∂Ç‡∂ú‡∑î ‡∑Ä‡∑í‡∂∫ ‡∂∫‡∑î‡∂≠‡∑î‡∂∫');
                return;
            }
            
            if (phoneNumber.length < 9 || phoneNumber.length > 12) {
                showError('‡∂Ö‡∂Ç‡∂ö‡∂∫ 9-12 ‡∂â‡∂Ω‡∂ö‡∑ä‡∂ö‡∂∏‡∑ä ‡∑Ä‡∑í‡∂∫ ‡∂∫‡∑î‡∂≠‡∑î‡∂∫');
                return;
            }
            
            // Generate 6-digit pair code
            const pairCode = generateSecure6DigitCode(phoneNumber);
            const fullNumber = '+94' + phoneNumber;
            
            // Store in memory (not persistent)
            generatedCodes[fullNumber] = {
                code: pairCode,
                timestamp: new Date().toISOString(),
                phone: fullNumber
            };
            
            // Display results
            document.getElementById('pairCodeDisplay').textContent = pairCode;
            document.getElementById('phoneDisplay').textContent = '‡∂Ö‡∂Ç‡∂ö‡∂∫: ' + fullNumber;
            document.getElementById('timestamp').textContent = '‡∂¢‡∂±‡∂±‡∂∫ ‡∂ö‡∑Ö ‡∑Ä‡∑ö‡∂Ω‡∑è‡∑Ä: ' + 
                new Date().toLocaleString('si-LK');
            
            // Show result container
            document.getElementById('resultContainer').style.display = 'block';
            
            // Clear input
            phoneInput.value = '';
            phoneInput.focus();
        }

        function generateSecure6DigitCode(phoneNumber) {
            // Create a deterministic but secure 6-digit code
            const timestamp = Date.now().toString();
            const seed = phoneNumber + timestamp;
            
            // Simple hash function for deterministic code generation
            let hash = 0;
            for (let i = 0; i < seed.length; i++) {
                hash = ((hash << 5) - hash) + seed.charCodeAt(i);
                hash = hash & hash;
            }
            
            // Ensure 6 digits, always positive
            const code = Math.abs(hash) % 1000000;
            
            // Format with leading zeros
            return code.toString().padStart(6, '0');
        }

        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            document.getElementById('resultContainer').style.display = 'none';
        }

        // Allow Enter key to generate code
        document.getElementById('phoneNumber').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                generatePairCode();
            }
        });

        // Auto-focus input on page load
        window.onload = function() {
            document.getElementById('phoneNumber').focus();
        };
    </script>
</body>
</html>
